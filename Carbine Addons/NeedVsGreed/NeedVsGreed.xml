<Forms>
    <Form Class="Window" LAnchorPoint="0" LAnchorOffset="58" TAnchorPoint=".5" TAnchorOffset="-81" RAnchorPoint="0" RAnchorOffset="489" BAnchorPoint=".5" BAnchorOffset="90" RelativeToClient="1" Font="Default" Text="" Template="Default" TooltipType="OnCursor" Name="NeedVsGreedForm" Border="0" Picture="1" SwallowMouseClicks="1" Moveable="1" Escapable="0" Overlapped="1" BGColor="white" TextColor="white" TooltipColor="" IgnoreMouse="0" Sprite="BK3:UI_BK3_Holo_Framing_2" Tooltip="" TransitionShowHide="1" UseTransitionSprite="0" TextId="">
        <Control Class="Window" LAnchorPoint="0" LAnchorOffset="129" TAnchorPoint="1" TAnchorOffset="-75" RAnchorPoint="0" RAnchorOffset="166" BAnchorPoint="1" BAnchorOffset="-38" RelativeToClient="1" Font="Default" Text="" Template="Default" TooltipType="OnCursor" Name="DiceIcon" BGColor="white" TextColor="white" TooltipColor="" Picture="1" IgnoreMouse="1" Sprite="IconSprites:Icon_Windows_UI_CRB_Dice" NewWindowDepth="1">
            <Control Class="Window" LAnchorPoint="0.5" LAnchorOffset="-11" TAnchorPoint="0.5" TAnchorOffset="-11" RAnchorPoint="0.5" RAnchorOffset="11" BAnchorPoint="0.5" BAnchorOffset="11" RelativeToClient="1" Font="CRB_InterfaceSmall_O" Text="" Template="Default" TooltipType="OnCursor" Name="ItemsInQueueIcon" BGColor="white" TextColor="white" TooltipColor="" TextId="" IgnoreMouse="1" Visible="0" Sprite="CRB_Basekit:kitBase_HoloBlue_InsetSimpleCircle" Picture="1" IgnoreTooltipDelay="1" TooltipFont="CRB_InterfaceSmall_O" NewControlDepth="1">
                <Control Class="Window" LAnchorPoint="0" LAnchorOffset="0" TAnchorPoint="0" TAnchorOffset="0" RAnchorPoint="1" RAnchorOffset="0" BAnchorPoint="1" BAnchorOffset="0" RelativeToClient="1" Font="CRB_InterfaceSmall_O" Text="" Template="Default" TooltipType="OnCursor" Name="ItemsInQueueText" BGColor="white" TextColor="white" TooltipColor="" TextId="" DT_WORDBREAK="1" DT_VCENTER="1" DT_CENTER="1" IgnoreMouse="1" Visible="1" Sprite=""/>
            </Control>
        </Control>
        <Control Class="Window" LAnchorPoint="0" LAnchorOffset="50" TAnchorPoint="0.5" TAnchorOffset="-32" RAnchorPoint="0" RAnchorOffset="114" BAnchorPoint="0.5" BAnchorOffset="32" RelativeToClient="1" Font="Default" Text="" Template="Default" TooltipType="OnCursor" Name="GiantItemIcon" BGColor="white" TextColor="white" TooltipColor="" Picture="1" IgnoreMouse="0" Sprite="ClientSprites:Icon_ItemWeaponStaff_UI_Item_Staff_001" Tooltip="" IgnoreTooltipDelay="1" NewControlDepth="1">
            <Event Name="MouseButtonUp" Function="OnGiantItemIconMouseUp"/>
        </Control>
        <Control Class="Window" LAnchorPoint="0" LAnchorOffset="50" TAnchorPoint="0" TAnchorOffset="94" RAnchorPoint="0" RAnchorOffset="114" BAnchorPoint="0" BAnchorOffset="113" RelativeToClient="1" Font="CRB_InterfaceMedium_B" Text="" Template="Default" TooltipType="OnCursor" Name="TimeLeftText" BGColor="white" TextColor="white" TooltipColor="" DT_CENTER="1" TextId="Challenges_NoProgress"/>
        <Control Class="Window" LAnchorPoint="0" LAnchorOffset="131" TAnchorPoint="0" TAnchorOffset="44" RAnchorPoint="1" RAnchorOffset="-73" BAnchorPoint="1" BAnchorOffset="-74" RelativeToClient="1" Font="CRB_InterfaceMedium" Text="" Template="Default" TooltipType="OnCursor" Name="LootTitle" BGColor="white" TextColor="white" TooltipColor="" DT_CENTER="0" DT_VCENTER="0" TextId="" DT_WORDBREAK="1" Tooltip=""/>
        <Control Class="Button" Base="BK3:btnHolo_Blue_Small" Font="CRB_Button" ButtonType="PushButton" RadioGroup="" LAnchorPoint="0" LAnchorOffset="165" TAnchorPoint="1" TAnchorOffset="-83" RAnchorPoint="0" RAnchorOffset="270" BAnchorPoint="1" BAnchorOffset="-30" DT_VCENTER="1" DT_CENTER="1" TooltipType="OnCursor" Name="NeedBtn" BGColor="white" TextColor="white" TooltipColor="" NormalTextColor="UI_BtnTextBlueNormal" PressedTextColor="UI_BtnTextBluePressed" FlybyTextColor="UI_BtnTextBlueFlyby" PressedFlybyTextColor="UI_BtnTextBluePressedFlyby" DisabledTextColor="UI_BtnTextBlueDisabled" Text="" TextId="GVT_Need" RelativeToClient="1" IgnoreTooltipDelay="0" Tooltip="" TooltipFont="CRB_InterfaceSmall_O" TooltipId="NeedVsGreed_NeedTooltip">
            <Event Name="ButtonSignal" Function="OnNeedBtn"/>
        </Control>
        <Control Class="Button" Base="BK3:btnHolo_Blue_Small" Font="CRB_Button" ButtonType="PushButton" RadioGroup="" LAnchorPoint="0" LAnchorOffset="270" TAnchorPoint="1" TAnchorOffset="-83" RAnchorPoint="0" RAnchorOffset="375" BAnchorPoint="1" BAnchorOffset="-30" DT_VCENTER="1" DT_CENTER="1" TooltipType="OnCursor" Name="GreedBtn" BGColor="white" TextColor="white" TooltipColor="" NormalTextColor="UI_BtnTextBlueNormal" PressedTextColor="UI_BtnTextBluePressed" FlybyTextColor="UI_BtnTextBlueFlyby" PressedFlybyTextColor="UI_BtnTextBluePressedFlyby" DisabledTextColor="UI_BtnTextBlueDisabled" Text="" TextId="GVT_Greed" RelativeToClient="1" IgnoreTooltipDelay="0" TooltipFont="CRB_InterfaceSmall_O" Tooltip="" TooltipId="NeedVsGreed_GreedTooltip">
            <Event Name="ButtonSignal" Function="OnGreedBtn"/>
        </Control>
        <Control Class="Button" Base="BK3:btnHolo_Close" Font="Thick" ButtonType="PushButton" RadioGroup="" LAnchorPoint="1" LAnchorOffset="-72" TAnchorPoint="0" TAnchorOffset="30" RAnchorPoint="1" RAnchorOffset="-30" BAnchorPoint="0" BAnchorOffset="74" DT_VCENTER="1" DT_CENTER="1" TooltipType="OnCursor" Name="PassBtn" BGColor="white" TextColor="white" TooltipColor="" NormalTextColor="white" PressedTextColor="white" FlybyTextColor="white" PressedFlybyTextColor="white" DisabledTextColor="white" Text="" Tooltip="" TooltipId="CRB_Pass_Loot" TooltipFont="CRB_InterfaceSmall_O" RelativeToClient="1" IgnoreTooltipDelay="1">
            <Event Name="ButtonSignal" Function="OnPassBtn"/>
        </Control>
        <Pixie LAnchorPoint="0" LAnchorOffset="44" TAnchorPoint="0.5" TAnchorOffset="-39" RAnchorPoint="0" RAnchorOffset="120" BAnchorPoint="0.5" BAnchorOffset="39" BGColor="white" Font="Default" TextColor="white" Text="" Sprite="BK3:UI_BK3_Holo_InsetSimple" Line="0"/>
    </Form>
</Forms>
n
		strTimeLeft = strTimeLeft .. ":0" .. tostring(nTimeLeftSecs)
	else
		strTimeLeft = strTimeLeft .. ":" .. tostring(nTimeLeftSecs)
	end
	self.wndMain:FindChild("TimeLeftText"):SetText(strTimeLeft)
end

-----------------------------------------------------------------------------------------------
-- Chat Message Events
-----------------------------------------------------------------------------------------------

function NeedVsGreed:OnLootRollAllPassed(itemLooted)
	local strResult = String_GetWeaselString(Apollo.GetString("NeedVsGreed_EveryonePassed"), itemLooted:GetChatLinkString())
	Event_FireGenericEvent("GenericEvent_LootChannelMessage", strResult)
end

function NeedVsGreed:OnLootRollWon(itemLoot, strWinner, bNeed)
	local strNeedOrGreed = nil
	if bNeed then
		strNeedOrGreed = Apollo.GetString("NeedVsGreed_NeedRoll")
	else
		strNeedOrGreed = Apollo.GetString("NeedVsGreed_GreedRoll")
	end
	
	local strResult = String_GetWeaselString(Apollo.GetString("NeedVsGreed_ItemWon"), strWinner, itemLoot:GetChatLinkString(), strNeedOrGreed)
	Event_FireGenericEvent("GenericEvent_LootChannelMessage", strResult)
end

function NeedVsGreed:OnLootRollSelected(itemLoot, strPlayer, bNeed)
	local strNeedOrGreed = nil
	if bNeed then
		strNeedOrGreed = Apollo.GetString("NeedVsGreed_NeedRoll")
	else
		strNeedOrGreed = Apollo.GetString("NeedVsGreed_GreedRoll")
	end

	local strResult = String_GetWeaselString(Apollo.GetString("NeedVsGreed_LootRollSelected"), strPlayer, strNeedOrGreed, itemLoot:GetChatLinkString())
	Event_FireGenericEvent("GenericEvent_LootChannelMessage", strResult)
end

function NeedVsGreed:OnLootRollPassed(itemLoot, strPlayer)
	local strResult = String_GetWeaselString(Apollo.GetString("NeedVsGreed_PlayerPassed"), strPlayer, itemLoot:GetChatLinkString())
	Event_FireGenericEvent("GenericEvent_LootChannelMessage", strResult)
end

function NeedVsGreed:OnLootRoll(itemLoot, strPlayer, nRoll, bNeed)
	local strNeedOrGreed = nil
	if bNeed then
		strNeedOrGreed = Apollo.GetString("NeedVsGreed_NeedRoll")
	else
		strNeedOrGreed = Apollo.Get